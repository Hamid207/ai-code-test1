# ===========================================
# iOS Backend - Environment Configuration
# ===========================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env file to version control

# ===========================================
# Server Configuration
# ===========================================
SERVER_PORT=8080

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================
DB_USER=postgres
# CRITICAL: Generate a strong password - REQUIRED!
# Generate using: openssl rand -base64 32
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_REQUIRED

DB_NAME=ios_backend
DB_PORT=5432

# SSL Mode: 'disable' for local dev, 'require' for production
DB_SSL_MODE=disable

# Database connection pool settings
DB_MAX_CONNS=25
DB_MIN_CONNS=5

# Database URL (constructed automatically in docker-compose)
# For local development outside Docker, use:
# DATABASE_URL=postgresql://postgres:CHANGE_THIS_STRONG_PASSWORD_REQUIRED@localhost:5432/ios_backend?sslmode=disable

# ===========================================
# Redis Configuration
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# CRITICAL: Generate a strong password - REQUIRED!
# Generate using: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_REQUIRED

# Redis connection pool settings
REDIS_MAX_CONNS=10
REDIS_MIN_IDLE_CONNS=2

# ===========================================
# Apple OAuth Configuration
# ===========================================
# Get these from: https://developer.apple.com/account/resources/identifiers/list
APPLE_TEAM_ID=YOUR_APPLE_TEAM_ID
APPLE_CLIENT_ID=YOUR_APPLE_CLIENT_ID

# ===========================================
# Google OAuth Configuration
# ===========================================
# Get this from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com

# ===========================================
# JWT Configuration
# ===========================================
# CRITICAL: Generate a strong random secret - REQUIRED! (minimum 32 characters)
# Generate using: openssl rand -base64 48
JWT_SECRET=CHANGE_THIS_GENERATE_WITH_OPENSSL_RAND_BASE64_48

# ===========================================
# CORS Configuration
# ===========================================
# Comma-separated list of allowed origins
# Examples:
#   - Single origin: http://localhost:3000
#   - Multiple origins: http://localhost:3000,https://yourdomain.com
#   - Empty = no CORS allowed (most secure)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ===========================================
# Development Notes & Security Best Practices
# ===========================================
# 1. CRITICAL: Change ALL "CHANGE_THIS_*" placeholders - app will NOT start without them!
# 2. Generate strong passwords:
#    - DB_PASSWORD: openssl rand -base64 32
#    - REDIS_PASSWORD: openssl rand -base64 32
#    - JWT_SECRET: openssl rand -base64 48
# 3. JWT_SECRET must be at least 32 characters long (enforced by app)
# 4. For production:
#    - Set DB_SSL_MODE=require
#    - Use proper secret management (AWS Secrets Manager, HashiCorp Vault, etc.)
#    - Remove port exposure for postgres and redis in docker-compose.yml
#    - Enable firewall rules
#    - Use Docker secrets instead of env vars
# 5. NEVER commit the .env file to version control
# 6. Run vulnerability scans: trivy image ios-backend-app:latest

# ===========================================
# Quick Setup Script
# ===========================================
# Copy this file and generate secrets automatically:
#
# cp .env.example .env
# sed -i "s|CHANGE_THIS_STRONG_PASSWORD_REQUIRED|$(openssl rand -base64 32)|g" .env
# sed -i "s|CHANGE_THIS_GENERATE_WITH_OPENSSL_RAND_BASE64_48|$(openssl rand -base64 48)|g" .env
#
# Then manually add your OAuth credentials
